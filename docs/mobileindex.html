<!DOCTYPE html>

<html lang="ko">


<head>
  <meta charset="UTF-8" />
  <title>ì •í˜¸ê°œë°œ ì¥ë¹„ ê´€ë¦¬</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- âœ… Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            accent: "#2563eb",
            accentLight: "#3b82f6",
          },
        },
      },
    };
  </script>


</head>

<body class="bg-gray-50 text-gray-900 font-sans min-h-screen overflow-x-hidden">

  <!-- âœ… ìŠ¬ë¼ì´ë“œ ë©”ë‰´ -->
  <nav id="sideMenu"
    class="fixed top-0 left-0 w-3/4 max-w-xs h-full bg-white shadow-lg transform -translate-x-full transition-transform duration-300 z-50 flex flex-col p-6">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-lg font-semibold text-gray-800">ë©”ë‰´</h2>
      <button id="menuCloseBtn" class="text-gray-500 hover:text-gray-700 transition text-xl font-bold">
        Ã—
      </button>
    </div>

    <ul class="space-y-4">
      <li>
        <button data-tab="home"
          class="menu-item w-full text-left text-gray-800 font-medium hover:text-accent transition">
          í™ˆ í™”ë©´
        </button>
      </li>

    </ul>
  </nav>

  <!-- âœ… ìƒë‹¨ í—¤ë” -->
  <header
    class="fixed top-0 left-0 w-full bg-accent text-white flex items-center justify-between px-4 py-3 shadow-md z-40">
    <button id="menuBtn" class="flex flex-col justify-center items-center space-y-1 w-7 h-6 focus:outline-none">
      <span class="w-6 h-[3px] bg-white rounded"></span>
      <span class="w-6 h-[3px] bg-white rounded"></span>
      <span class="w-6 h-[3px] bg-white rounded"></span>
    </button>

    <div class="flex items-center space-x-3">
      <div class="flex flex-col items-end text-right text-sm leading-tight">
        <span id="userName" class="font-semibold">ë¡œê·¸ì¸ ì¤‘...</span>
        <span id="userRole" class="text-xs text-blue-100">ì •ë³´ í™•ì¸ ì¤‘</span>
      </div>

      <!-- âœ… ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
      <button id="btnLogout"
        class="bg-white/20 hover:bg-white/30 text-white text-xs font-semibold px-3 py-1 rounded transition">
        ë¡œê·¸ì•„ì›ƒ
      </button>
    </div>
  </header>


  <!-- âœ… ë³¸ë¬¸ ì˜ì—­ -->
  <main class="pt-20 pb-20 px-4 space-y-8">

    <!-- ğŸ”¹ í™ˆ í™”ë©´ -->
    <section id="home" class="tab-section text-center">
      <img src="static/logo.gif" alt="ì •í˜¸ê°œë°œ" class="h-10 mx-auto mb-6 object-contain" />
      <h2 class="text-2xl font-bold text-gray-800 mb-2">ì •í˜¸ê°œë°œ</h2>
      <p id="currentTime" class="text-gray-500 text-sm">--:--:--</p>
    </section>

 





  </main>

  <!-- âœ… í•˜ë‹¨ ìƒíƒœë°” -->
  <footer class="fixed bottom-0 left-0 w-full bg-gray-900 text-gray-100 text-xs flex justify-between px-3 py-2 z-40">
    <span id="serverStatus" class="before:content-['â—'] before:text-red-500 before:mr-1">
      ì„œë²„ ì—°ê²° ì¤‘...
    </span>
    <span id="deviceStatus">ëª¨ë°”ì¼ ì ‘ì†</span>
  </footer>


  <!-- âœ… JS -->
  <script>
    const menuBtn = document.getElementById("menuBtn");
    const menuCloseBtn = document.getElementById("menuCloseBtn");
    const sideMenu = document.getElementById("sideMenu");
    const tabSections = document.querySelectorAll(".tab-section");
    const menuItems = document.querySelectorAll(".menu-item");
    const timeEl = document.getElementById("currentTime");

    // âœ… API ì£¼ì†Œ ì •ì˜
    const API_BASE =
      location.hostname === "tgyeo.github.io"
        ? "https://port-0-jeongho-1-mghorm7bef413a34.sel3.cloudtype.app"
        : "http://127.0.0.1:5050";

    // âœ… ë©”ë‰´ ì—´ê¸°/ë‹«ê¸°
    menuBtn.addEventListener("click", () => (sideMenu.style.transform = "translateX(0)"));
    menuCloseBtn.addEventListener("click", () => (sideMenu.style.transform = "translateX(-100%)"));

    // âœ… íƒ­ ì „í™˜
    menuItems.forEach((btn) => {
      btn.addEventListener("click", () => {
        const target = btn.dataset.tab;
        tabSections.forEach((s) => s.classList.add("hidden"));
        document.getElementById(target).classList.remove("hidden");
        sideMenu.style.transform = "translateX(-100%)";
      });
    });

    // âœ… í˜„ì¬ ì‹œê°„ í‘œì‹œ
    function updateClock() {
      const now = new Date();
      const formatted = now.toLocaleTimeString("ko-KR", { hour12: false });
      timeEl.textContent = formatted;
    }
    setInterval(updateClock, 1000);
    updateClock();

    // ==========================================================================
    // ğŸŒ ì„œë²„ ì—°ê²° ìƒíƒœ ì²´í¬ (Footer í‘œì‹œ)
    // ==========================================================================
    async function checkServerStatus() {
      try {
        const res = await fetch(`${API_BASE}/api/ping`, { cache: "no-store" });
        if (!res.ok) throw new Error("HTTP " + res.status);
        return true;
      } catch {
        return false;
      }
    }

    function updateFooterStatus(connected) {
      const el = document.getElementById("serverStatus");
      if (!el) return;

      if (connected) {
        el.textContent = "ì„œë²„ ì—°ê²°ë¨";
        el.classList.remove("before:text-red-500", "text-gray-400");
        el.classList.add("before:text-green-400", "text-green-300");
      } else {
        el.textContent = "ì„œë²„ ì—°ê²° ëŠê¹€";
        el.classList.remove("before:text-green-400", "text-green-300");
        el.classList.add("before:text-red-500", "text-gray-400");
      }
    }

    // âœ… 5ì´ˆ ê°„ê²©ìœ¼ë¡œ ì„œë²„ ì—°ê²° ìƒíƒœ í™•ì¸
    function startServerConnectionCheck() {
      checkServerStatus().then(updateFooterStatus);
      setInterval(async () => {
        const ok = await checkServerStatus();
        updateFooterStatus(ok);
      }, 5000);
    }

    // âœ… í˜ì´ì§€ ë¡œë“œì‹œ ìë™ ì‹¤í–‰
    document.addEventListener("DOMContentLoaded", () => {
      startServerConnectionCheck();
    });
  </script>



  <script src="assets/js/mobile-workspace.bundle.js" defer></script>
</body>



</html>